<html>
<div id='placeForQuote'></div>


<script src="https://unpkg.com/react/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/babel-standalone/babel.js"></script><script type='text/babel'>

	const placeForQuote = document.getElementById('placeForQuote')



	let quotes


	let xhr = new XMLHttpRequest()
	xhr.open('GET', 'https://gist.githubusercontent.com/natebass/b0a548425a73bdf8ea5c618149fe1fce/raw/f4231cd5961f026264bb6bb3a6c41671b044f1f4/quotes.json', true);

	xhr.addEventListener('load', function (e) {
	if (xhr.status === 200) {
		quotes = JSON.parse(xhr.response)
		ReactDOM.render(
		<QuoteDiv />,
		document.getElementById('placeForQuote')
	)

}
});

xhr.addEventListener("error", e => {
	placeForQuote.textContent = "Nie udało się nawiązać połączenia";
});


xhr.send();



function giveQuote() {
	return quotes[Math.floor(Math.random()*quotes.length)]
}









class QuoteDiv extends React.Component {

	constructor(props){
		super(props)
		this.state = {
			stack: [giveQuote()]
		}

		this.newQuote = this.newQuote.bind(this)
		this.previousQuote = this.previousQuote.bind(this)
	}

	newQuote() {
		this.setState({
			stack: this.state.stack.concat([giveQuote()])
		})
	}

	
	previousQuote() {

		let temporaryCopy = [...this.state.stack]
		temporaryCopy.pop()

		this.setState({
			stack: temporaryCopy
		})

	}


	render(){

		let last = this.state.stack[this.state.stack.length - 1] // dzięki tej zmiennej reszta jest krótsza		// można użyć niby metody at, ale ona może nie działać na starych przeglądarkach 




		return (
			<div> 
			{last.quote} - {last.author}
			<br/>
			<button onClick={this.newQuote}>Nowy</button>
			<button onClick={this.previousQuote} style={ {
			visibility:  this.state.stack.length > 1 ? 'visible' : 'hidden'
			}}>Poprzedni</button>



			</div>
		)
	}

}




</script>
</html>




